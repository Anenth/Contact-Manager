"use strict";angular.module("PractoApp",["ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"HomeCtrl"}).when("/add",{templateUrl:"views/add.html",controller:"AddCtrl"}).when("/edit/:id",{templateUrl:"views/add.html",controller:"EditCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("PractoApp").factory("contactService",["$http",function(a){var b="anenthvishnu@gmail.com",c="http://ui-proj.practodev.in/contacts";return{list:function(){return a({method:"GET",url:c,headers:{"X-USER":b}}).success(function(a){localStorage.setItem("contacts",JSON.stringify(a.contacts))})},newContact:function(d){return a({method:"POST",url:c,data:d,headers:{"X-USER":b,"Content-Type":"application/x-www-form-urlencoded"}})},get:function(d){return a({method:"GET",url:c+"/"+d,headers:{"X-USER":b}})},update:function(d,e){return a({method:"PUT",url:c+"/"+d,data:e,headers:{"X-USER":b,"Content-Type":"application/x-www-form-urlencoded"}})},"delete":function(d){return a({method:"DELETE",url:c+"/"+d,headers:{"X-USER":b}})}}}]),angular.module("PractoApp").controller("HomeCtrl",["$scope","contactService",function(a,b){var c=function(){b.list().then(function(){a.contacts=JSON.parse(localStorage.getItem("contacts"))})};c(),a.delete=function(a,d){var e=confirm('You are about to delete contact for"'+a+'". Proceed ?');e&&b.delete(d).success(function(){alert("deleted"),c()})}}]),angular.module("PractoApp").controller("AddCtrl",["$scope","contactService","$location",function(a,b,c){b.list().then(function(){a.contacts=JSON.parse(localStorage.getItem("contacts"))}),a.addContact=function(){b.newContact($.param({contact_name:a.inputName,contact_phone:a.inputPhone,contact_email:a.inputEmail})).success(function(a,b){201===b?(alert("Contact added"),c.path("/")):409===b&&alert("Phone number in use")})}}]),angular.module("PractoApp").controller("EditCtrl",["$scope","contactService","$routeParams","$location",function(a,b,c,d){b.get(c.id).success(function(b,c){201===c?(b=b.contacts,a.inputName=b.contact_name,a.inputPhone=b.contact_phone,a.inputEmail=b.contact_email,a.editPage=!0):alert(c+"error")}),a.addContact=function(){b.update(c.id,$.param({contact_name:a.inputName,contact_phone:a.inputPhone,contact_email:a.inputEmail})).success(function(a,b){201===b&&(alert("Contact updated"),d.path("/"))})}}]);